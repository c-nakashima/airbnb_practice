const windowHeight=$(window).height(),windowWidth=$(window).width(),header=document.getElementById("header"),accountBtn=document.getElementById("accountBtn"),searchForm=document.getElementById("searchForm"),extendedFormLists=document.getElementsByClassName("extendedformlist"),shrinkedFormLists=document.getElementsByClassName("shrinkedformlist"),conditions=document.getElementById("conditions"),formLists=document.getElementsByClassName("formlist"),lines=document.getElementsByClassName("line"),formListsArray=document.getElementsByClassName("formlists"),hotelFormLists=document.getElementById("hotelFormLists"),experienceFormLists=document.getElementById("experienceFormLists"),locationForm=document.getElementById("locationForm"),searchFormLines=document.getElementsByClassName("line"),locationWindow=document.getElementById("LocationWindow"),checkinWindow=document.getElementById("CheckinWindow"),peopleWindow=document.getElementById("PeopleWindow"),accountWindow=document.getElementById("AccountWindow");function shrinkSearchForm(){$("header").addClass("-bgwhite"),Array.from(extendedFormLists).forEach((e=>{e.classList.add("-hide")})),Array.from(searchFormLines).forEach((e=>{e.classList.add("-hide")})),Array.from(shrinkedFormLists).forEach((e=>{e.classList.remove("-hide"),e.classList.add("-shrinked")})),searchForm.classList.add("-shrinked"),conditions.classList.add("-hide"),hotelFormLists.classList.add("-shrinked"),experienceFormLists.classList.add("-shrinked"),header.classList.add("-shrinked")}function extendSearchForm(){$("header").removeClass("-bgwhite"),Array.from(extendedFormLists).forEach((e=>{e.classList.remove("-hide")})),Array.from(searchFormLines).forEach((e=>{e.classList.remove("-hide")})),Array.from(shrinkedFormLists).forEach((e=>{e.classList.add("-hide"),e.classList.remove("-shrinked")})),searchForm.classList.remove("-shrinked"),hotelFormLists.classList.remove("-shrinked"),experienceFormLists.classList.remove("-shrinked"),header.classList.remove("-shrinked"),windowWidth>750&&conditions.classList.remove("-hide")}function setClickedFormStyle(){Array.from(formLists).forEach(((e,t)=>{e.addEventListener("click",(()=>{Array.from(formLists).forEach(((e,n)=>{switch(e.classList.remove("-focused"),formListsArray[0].classList.remove("-focused"),t){case 0:lines[0].classList.add("-hide"),lines[1].classList.remove("-hide"),lines[2].classList.remove("-hide");break;case 1:lines[0].classList.add("-hide"),lines[1].classList.add("-hide"),lines[2].classList.remove("-hide");break;case 2:lines[0].classList.remove("-hide"),lines[1].classList.add("-hide"),lines[2].classList.add("-hide");break;case 3:lines[1].classList.remove("-hide"),lines[2].classList.add("-hide")}})),e.classList.add("-focused"),Array.from(formListsArray).forEach((e=>{e.classList.remove("-focused")}))}))}))}function toggleFocusedStatus(){document.addEventListener("click",(e=>{e.target.closest("#searchForm")||(Array.from(formLists).forEach((e=>{e.classList.remove("-focused")})),Array.from(formListsArray).forEach((e=>{e.classList.remove("-focused")})))}))}function toggleFormWindow(e,t){document.addEventListener("click",(n=>{n.target.closest(e)?t.setAttribute("data-open","true"):t.setAttribute("data-open","false")}))}function toggleCheckinFormWindow(){document.addEventListener("click",(e=>{e.target.closest("#checkinForm")||e.target.closest("#checkoutForm")?checkinWindow.setAttribute("data-open","true"):checkinWindow.setAttribute("data-open","false")}))}$(window).scroll((function(){$(this).scrollTop()>$("header").offset().top-windowHeight&&0!==$("header").offset().top?shrinkSearchForm():extendSearchForm()})),setClickedFormStyle(),toggleFormWindow("#locationForm",locationWindow),toggleCheckinFormWindow(),toggleFormWindow("#peopleForm",peopleWindow),toggleFormWindow("#accountBtn",accountWindow),toggleFocusedStatus();const week=["日","月","火","水","木","金","土"],today=new Date,nextMonthToday=new Date;nextMonthToday.setMonth(nextMonthToday.getMonth()+1);let showDate=new Date(today.getFullYear(),today.getMonth(),1),showNextMonthDate=new Date(nextMonthToday.getFullYear(),nextMonthToday.getMonth(),1);const currentMonthPrevBtn=document.getElementById("currentMonthPrevBtn"),currentMonthNextBtn=document.getElementById("currentMonthNextBtn"),nextMonthPrevBtn=document.getElementById("nextMonthPrevBtn"),nextMonthNextBtn=document.getElementById("nextMonthNextBtn");function showPrevMonth(e,t,n){e.addEventListener("click",(()=>{showDate.setMonth(showDate.getMonth()-1),showCalendar(showDate,t,n),e===currentMonthPrevBtn&&(showNextMonthDate.setMonth(showNextMonthDate.getMonth()-1),showCalendar(showNextMonthDate,"nextMonthCalendar","nextCalendarHeader"))}))}function showNextMonth(e,t,n){e.addEventListener("click",(()=>{showNextMonthDate.setMonth(showNextMonthDate.getMonth()+1),showCalendar(showNextMonthDate,t,n),e===nextMonthNextBtn&&(showDate.setMonth(showDate.getMonth()+1),showCalendar(showDate,"calendar","calendarHeader"))}))}function showCalendar(e,t,n){let s=e.getFullYear(),o=e.getMonth();document.getElementById(n).innerHTML=s+"年 "+(o+1)+"月";let a=createCalendar(s,o);document.getElementById(t).innerHTML=a}function createCalendar(e,t){let n="<table><tr class='dayOfWeek'>";for(var s=0;s<week.length;s++)n+=`<th>${week[s]}</th>`;n+="</tr>";let o=0,a=new Date(e,t,1).getDay(),d=new Date(e,t+1,0).getDate(),r=new Date(e,t,0).getDate(),l=Math.ceil((a+d)/week.length);for(let s=0;s<l;s++){n+="<tr>";for(let l=0;l<week.length;l++)0==s&&l<a?n+='<td class="-disabled"><div class="date">'+(r-a+l+1)+"</div></td>":o>=d?(o++,n+='<td class="-disabled"><div class="date">'+(o-d)+"</div></td>"):(o++,e<today.getFullYear()||t<today.getMonth()||e<=today.getFullYear()&&t<=today.getMonth()&&o<today.getDate()?n+=`<td class="-previous"><div class="date">${o}</div></td>`:e==today.getFullYear()&&t==today.getMonth()&&o==today.getDate()?n+=`<td class="-today"><div class="date">${o}</div></td>`:n+=`<td><div class="date">${o}</div></td>`);n+="</tr>"}return n}window.onload=function(){showCalendar(today,"calendar","calendarHeader",calendar),showCalendar(nextMonthToday,"nextMonthCalendar","nextCalendarHeader",calendar),showPrevMonth(currentMonthPrevBtn,"calendar","calendarHeader"),showNextMonth(currentMonthNextBtn,"calendar","calendarHeader"),showPrevMonth(nextMonthPrevBtn,"nextMonthCalendar","nextCalendarHeader"),showNextMonth(nextMonthNextBtn,"nextMonthCalendar","nextCalendarHeader")};const calenderToggleBtn=document.getElementById("calenderToggleBtn"),dateToggleBtn=document.getElementById("dateToggleBtn"),calenderArea=document.getElementById("calenderArea"),flexiblePlanArea=document.getElementById("flexiblePlanArea");calenderToggleBtn.addEventListener("click",(()=>{calenderToggleBtn.classList.toggle("-selected"),dateToggleBtn.classList.toggle("-selected"),calenderArea.classList.remove("-hide"),flexiblePlanArea.classList.add("-hide")})),dateToggleBtn.addEventListener("click",(()=>{dateToggleBtn.classList.toggle("-selected"),calenderToggleBtn.classList.toggle("-selected"),calenderArea.classList.add("-hide"),flexiblePlanArea.classList.remove("-hide")}));const lengthOfStays=document.getElementsByClassName("lengthofstay");Array.from(lengthOfStays).forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("-selected")}))}));const monthList=document.getElementById("monthList"),month=(new Date).getMonth()+1;for(let e=month+1;e<month+7;e++){const t=document.createElement("li");e<=month+2&&t.classList.add("-selected"),t.innerHTML=`<img src="/assets/calendar_selected.jpg" alt="カレンダー"><p>${e}月</p>`,t.addEventListener("click",(()=>{t.classList.toggle("-selected")})),monthList.appendChild(t)}const peopleList=document.getElementById("peopleList"),PeoplenumCounters=document.getElementsByClassName("peoplenumcounter");Array.from(PeoplenumCounters).forEach((e=>{const t=document.createElement("button"),n=document.createElement("span"),s=document.createElement("button");t.setAttribute("class","minusbtn counter"),n.setAttribute("class","peoplenum"),s.setAttribute("class","plusbtn counter");let o=0;function a(){0===o?t.classList.add("-disabled"):t.classList.remove("-disabled")}t.innerText="-",n.innerHTML=String(o),s.innerText="+",e.appendChild(t),e.appendChild(n),e.appendChild(s),s.addEventListener("click",(()=>{o++,n.innerHTML=String(o),a()})),t.addEventListener("click",(()=>{0!=o&&(o--,n.innerHTML=String(o),a())})),o=0,a()}));