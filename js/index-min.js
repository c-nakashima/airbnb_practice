const windowHeight=$(window).height(),windowWidth=$(window).width(),header=document.getElementById("header"),searchForm=document.getElementById("searchForm"),extendedFormLists=document.getElementsByClassName("extendedformlist"),shrinkedFormLists=document.getElementsByClassName("shrinkedformlist"),conditions=document.getElementById("conditions"),formLists=document.getElementsByClassName("formlist"),hotelFormLists=document.getElementById("hotelFormLists"),experienceFormLists=document.getElementById("experienceFormLists"),locationForm=document.getElementById("locationForm"),searchFormLines=document.getElementsByClassName("line");function shrinkSearchForm(){$("header").addClass("-bgwhite"),Array.from(extendedFormLists).forEach((e=>{e.classList.add("-hide")})),Array.from(searchFormLines).forEach((e=>{e.classList.add("-hide")})),Array.from(shrinkedFormLists).forEach((e=>{e.classList.remove("-hide"),e.classList.add("-shrinked")})),searchForm.classList.add("-shrinked"),conditions.classList.add("-hide"),hotelFormLists.classList.add("-shrinked"),experienceFormLists.classList.add("-shrinked"),header.classList.add("-shrinked")}function extendSearchForm(){$("header").removeClass("-bgwhite"),Array.from(extendedFormLists).forEach((e=>{e.classList.remove("-hide")})),Array.from(searchFormLines).forEach((e=>{e.classList.remove("-hide")})),Array.from(shrinkedFormLists).forEach((e=>{e.classList.add("-hide"),e.classList.remove("-shrinked")})),searchForm.classList.remove("-shrinked"),hotelFormLists.classList.remove("-shrinked"),experienceFormLists.classList.remove("-shrinked"),header.classList.remove("-shrinked"),windowWidth>750&&conditions.classList.remove("-hide")}function setClickedFormStyle(){Array.from(formLists).forEach((e=>{e.addEventListener("click",(t=>{Array.from(formLists).forEach((e=>{e.classList.remove("-focused")})),e.classList.add("-focused")}))}))}function toggleFormWindow(e,t){document.addEventListener("click",(n=>{n.target.closest(e)?t.setAttribute("data-open","true"):t.setAttribute("data-open","false")}))}$(window).scroll((function(){$(this).scrollTop()>$("header").offset().top-windowHeight&&0!==$("header").offset().top?shrinkSearchForm():extendSearchForm()}));const locationWindow=document.getElementById("LocationWindow"),checkinWindow=document.getElementById("CheckinWindow");setClickedFormStyle(),toggleFormWindow("#locationForm",locationWindow),toggleFormWindow("#checkinForm",checkinWindow);const week=["日","月","火","水","木","金","土"],today=new Date,nextMonthToday=new Date;nextMonthToday.setMonth(nextMonthToday.getMonth()+1),console.log("nextMonthToday",nextMonthToday);let showDate=new Date(today.getFullYear(),today.getMonth(),1),showNextMonthDate=new Date(nextMonthToday.getFullYear(),nextMonthToday.getMonth(),1);const currentMonthPrevBtn=document.getElementById("currentMonthPrevBtn"),currentMonthNextBtn=document.getElementById("currentMonthNextBtn"),nextMonthPrevBtn=document.getElementById("nextMonthPrevBtn"),nextMonthNextBtn=document.getElementById("nextMonthNextBtn");function showPrevMonth(e,t,n){e.addEventListener("click",(()=>{showDate.setMonth(showDate.getMonth()-1),showCalendar(showDate,t,n),e===currentMonthPrevBtn&&(showNextMonthDate.setMonth(showNextMonthDate.getMonth()-1),showCalendar(showNextMonthDate,"nextMonthCalendar","nextCalendarHeader"))}))}function showNextMonth(e,t,n){e.addEventListener("click",(()=>{showNextMonthDate.setMonth(showNextMonthDate.getMonth()+1),showCalendar(showNextMonthDate,t,n),e===nextMonthNextBtn&&(showDate.setMonth(showDate.getMonth()+1),showCalendar(showDate,"calendar","calendarHeader"))}))}function showCalendar(e,t,n){let o=e.getFullYear(),a=e.getMonth();document.getElementById(n).innerHTML=o+"年 "+(a+1)+"月";let s=createCalendar(o,a);document.getElementById(t).innerHTML=s}function createCalendar(e,t){let n="<table><tr class='dayOfWeek'>";for(var o=0;o<week.length;o++)n+=`<th>${week[o]}</th>`;n+="</tr>";let a=0,s=new Date(e,t,1).getDay(),d=new Date(e,t+1,0).getDate(),r=new Date(e,t,0).getDate(),l=Math.ceil((s+d)/week.length);for(let o=0;o<l;o++){n+="<tr>";for(let l=0;l<week.length;l++)0==o&&l<s?n+='<td class="-disabled"><div class="date">'+(r-s+l+1)+"</div></td>":a>=d?(a++,n+='<td class="-disabled"><div class="date">'+(a-d)+"</div></td>"):(a++,e<today.getFullYear()||t<today.getMonth()||e<=today.getFullYear()&&t<=today.getMonth()&&a<today.getDate()?n+=`<td class="-previous"><div class="date">${a}</div></td>`:e==today.getFullYear()&&t==today.getMonth()&&a==today.getDate()?n+=`<td class="-today"><div class="date">${a}</div></td>`:n+=`<td><div class="date">${a}</div></td>`);n+="</tr>"}return n}window.onload=function(){showCalendar(today,"calendar","calendarHeader",calendar),showCalendar(nextMonthToday,"nextMonthCalendar","nextCalendarHeader",calendar),showPrevMonth(currentMonthPrevBtn,"calendar","calendarHeader"),showNextMonth(currentMonthNextBtn,"calendar","calendarHeader"),showPrevMonth(nextMonthPrevBtn,"nextMonthCalendar","nextCalendarHeader"),showNextMonth(nextMonthNextBtn,"nextMonthCalendar","nextCalendarHeader")};const calenderToggleBtn=document.getElementById("calenderToggleBtn"),dateToggleBtn=document.getElementById("dateToggleBtn"),calenderArea=document.getElementById("calenderArea"),flexiblePlanArea=document.getElementById("flexiblePlanArea");calenderToggleBtn.addEventListener("click",(()=>{calenderToggleBtn.classList.toggle("-selected"),dateToggleBtn.classList.toggle("-selected"),calenderArea.classList.remove("-hide"),flexiblePlanArea.classList.add("-hide")})),dateToggleBtn.addEventListener("click",(()=>{dateToggleBtn.classList.toggle("-selected"),calenderToggleBtn.classList.toggle("-selected"),calenderArea.classList.add("-hide"),flexiblePlanArea.classList.remove("-hide")}));const lengthOfStays=document.getElementsByClassName("lengthofstay");Array.from(lengthOfStays).forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("-selected")}))}));const monthList=document.getElementById("monthList"),month=(new Date).getMonth()+1;for(let e=month+1;e<month+7;e++){const t=document.createElement("li");e<=month+2&&t.classList.add("-selected"),t.innerHTML=`<img src="/assets/calendar_selected.jpg" alt="カレンダー"><p>${e}月</p>`,t.addEventListener("click",(()=>{t.classList.toggle("-selected")})),monthList.appendChild(t)}