const windowHeight=$(window).height(),windowWidth=$(window).width(),header=document.getElementById("header"),searchForm=document.getElementById("searchForm"),extendedFormLists=document.getElementsByClassName("extendedformlist"),shrinkedFormLists=document.getElementsByClassName("shrinkedformlist"),conditions=document.getElementById("conditions"),formLists=document.getElementsByClassName("formlist"),hotelFormLists=document.getElementById("hotelFormLists"),experienceFormLists=document.getElementById("experienceFormLists"),locationForm=document.getElementById("locationForm"),searchFormLines=document.getElementsByClassName("line");function shrinkSearchForm(){$("header").addClass("-bgwhite"),console.log(extendedFormLists),Array.from(extendedFormLists).forEach((e=>{e.classList.add("-hide")})),Array.from(searchFormLines).forEach((e=>{e.classList.add("-hide")})),Array.from(shrinkedFormLists).forEach((e=>{e.classList.remove("-hide"),e.classList.add("-shrinked")})),searchForm.classList.add("-shrinked"),conditions.classList.add("-hide"),hotelFormLists.classList.add("-shrinked"),experienceFormLists.classList.add("-shrinked"),header.classList.add("-shrinked")}function extendSearchForm(){$("header").removeClass("-bgwhite"),Array.from(extendedFormLists).forEach((e=>{e.classList.remove("-hide")})),Array.from(searchFormLines).forEach((e=>{e.classList.remove("-hide")})),Array.from(shrinkedFormLists).forEach((e=>{e.classList.add("-hide"),e.classList.remove("-shrinked")})),searchForm.classList.remove("-shrinked"),hotelFormLists.classList.remove("-shrinked"),experienceFormLists.classList.remove("-shrinked"),header.classList.remove("-shrinked"),windowWidth>750&&conditions.classList.remove("-hide")}function setClickedFormStyle(){Array.from(formLists).forEach((e=>{e.addEventListener("click",(t=>{Array.from(formLists).forEach((e=>{e.style.backgroundColor="transparent",e.style.boxShadow="none"})),e.style.backgroundColor="#FFF",e.style.boxShadow="rgb(0 0 0 / 14%) 0px 1px 12px 1px"}))}))}function toggleFormWindow(e,t){document.addEventListener("click",(n=>{n.target.closest(e)?t.setAttribute("data-open","true"):t.setAttribute("data-open","false")}))}$(window).scroll((function(){$(this).scrollTop()>$("header").offset().top-windowHeight&&0!==$("header").offset().top?shrinkSearchForm():extendSearchForm()}));const locationWindow=document.getElementById("LocationWindow"),checkinWindow=document.getElementById("CheckinWindow");setClickedFormStyle(),toggleFormWindow("#locationForm",locationWindow),toggleFormWindow("#checkinForm",checkinWindow);const week=["日","月","火","水","木","金","土"],today=new Date,nextMonthToday=new Date;nextMonthToday.setMonth(nextMonthToday.getMonth()+1),console.log("nextMonthToday",nextMonthToday);let showDate=new Date(today.getFullYear(),today.getMonth(),1),showNextMonthDate=new Date(nextMonthToday.getFullYear(),nextMonthToday.getMonth(),1);const currentMonthPrevBtn=document.getElementById("currentMonthPrevBtn"),currentMonthNextBtn=document.getElementById("currentMonthNextBtn"),nextMonthPrevBtn=document.getElementById("nextMonthPrevBtn"),nextMonthNextBtn=document.getElementById("nextMonthNextBtn");function showPrevMonth(e,t,n){e.addEventListener("click",(()=>{showDate.setMonth(showDate.getMonth()-1),showCalendar(showDate,t,n),e===currentMonthPrevBtn&&(showNextMonthDate.setMonth(showNextMonthDate.getMonth()-1),showCalendar(showNextMonthDate,"nextMonthCalendar","nextCalendarHeader"))}))}function showNextMonth(e,t,n){e.addEventListener("click",(()=>{showNextMonthDate.setMonth(showNextMonthDate.getMonth()+1),showCalendar(showNextMonthDate,t,n),e===nextMonthNextBtn&&(showDate.setMonth(showDate.getMonth()+1),showCalendar(showDate,"calendar","calendarHeader"))}))}function showCalendar(e,t,n){let o=e.getFullYear(),a=e.getMonth();document.getElementById(n).innerHTML=o+"年 "+(a+1)+"月";let r=createCalendar(o,a);document.getElementById(t).innerHTML=r}function createCalendar(e,t){let n="<table><tr class='dayOfWeek'>";for(var o=0;o<week.length;o++)n+=`<th>${week[o]}</th>`;n+="</tr>";let a=0,r=new Date(e,t,1).getDay(),s=new Date(e,t+1,0).getDate(),d=new Date(e,t,0).getDate(),h=Math.ceil((r+s)/week.length);for(let o=0;o<h;o++){n+="<tr>";for(let h=0;h<week.length;h++)0==o&&h<r?n+="<td class='-disabled'>"+(d-r+h+1)+"</td>":a>=s?(a++,n+="<td class='-disabled'>"+(a-s)+"</td>"):(a++,e<today.getFullYear()||t<today.getMonth()||e<=today.getFullYear()&&t<=today.getMonth()&&a<today.getDate()?n+="<td class='-previous'>"+a+"</td>":e==today.getFullYear()&&t==today.getMonth()&&a==today.getDate()?n+="<td class='-today'>"+a+"</td>":n+="<td>"+a+"</td>");n+="</tr>"}return n}window.onload=function(){showCalendar(today,"calendar","calendarHeader",calendar),showCalendar(nextMonthToday,"nextMonthCalendar","nextCalendarHeader",calendar),showPrevMonth(currentMonthPrevBtn,"calendar","calendarHeader"),showNextMonth(currentMonthNextBtn,"calendar","calendarHeader"),showPrevMonth(nextMonthPrevBtn,"nextMonthCalendar","nextCalendarHeader"),showNextMonth(nextMonthNextBtn,"nextMonthCalendar","nextCalendarHeader")};